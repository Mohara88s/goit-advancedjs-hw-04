{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '21847975-d0fb10f6989c918e9c55b7840';\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nexport default async function fetchPictures(searchData, page = 1, perPage = 20, imageType = \"photo\", orientation = \"horizontal\", safesearch = true) {\n  const response = await axios.get(\n    `/`, {\n    params: {\n      key: API_KEY,\n      q: searchData,\n      page,\n      per_page: perPage,\n      image_type: imageType,\n      orientation,\n      safesearch\n    }\n  }\n  )\n  return response.data;\n}","export default function renderPictures(pictures, gallery) {\n  const markup = pictures\n    .map((picture) => {\n      return `\n          <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${picture.largeImageURL}\">\n              <img\n                class=\"gallery-image\"\n                src=\"${picture.webformatURL}\"\n                alt=\"${picture.tags}\"\n              />\n              <ul class=\"image-details\">\n                <li class=\"image-details-item\">\n                  <p>Likes</p>\n                  <p>${picture.likes}</p>\n                </li>\n                <li class=\"image-details-item\">\n                  <p>Views</p>\n                  <p>${picture.views}</p>\n                </li>\n                <li class=\"image-details-item\">\n                  <p>Comments</p>\n                  <p>${picture.comments}</p>\n                </li>\n                <li class=\"image-details-item\">\n                  <p>Downloads</p>\n                  <p>${picture.downloads}</p>\n                </li>\n              </ul>\n            </a>\n          </li>\n      `;\n    })\n    .join(\"\");\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport fetchPictures from \"./js/pixabay-api\"\nimport renderPictures from \"./js/render-functions\";\n\nlet searchData = \"\";\nlet searchQuery = \"\"\nlet currentPage = 1;\nlet perPage = 15;\nconst searchForm = document.querySelector(\"form.search-form\");\nconst gallery = document.querySelector(\"ul.gallery\");\nconst loadMoreBtn = document.querySelector(\"button.load-more-btn\");\nconst loader = document.querySelector(\"span.loader\");\n\nsearchForm.addEventListener(\"input\", (evt) => {\n  searchData = evt.target.value;\n});\n\nsearchForm.addEventListener(\"submit\", (evt) => {\n  evt.preventDefault();\n  if (!searchData) {\n    iziToast.warning({\n      icon: '',\n      position: 'topRight',\n      message: 'Please, fill in the search field'\n    });\n    return\n  }\n  gallery.innerHTML = '';\n  currentPage = 1;\n  searchQuery = searchData\n  loadAndRenderPictures()\n  searchData = \"\";\n  searchForm.reset();\n});\n\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n\nvar lightbox = new SimpleLightbox('ul.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250\n});\n\nasync function loadAndRenderPictures() {\n  loadMoreBtn.classList.add('visually-hidden');\n  loader.classList.remove('visually-hidden');\n  try {\n    const pictures = await fetchPictures(searchQuery, currentPage, perPage);\n    currentPage += 1;\n    if (pictures.totalHits === 0) {\n      throw new Error(\"Sorry, there are no images matching your search query. Please try again!\");\n    }\n    renderPictures(pictures.hits, gallery)\n    lightbox.refresh()\n    loader.classList.add('visually-hidden');\n    showLoadMoreBtn(currentPage, perPage, pictures.totalHits)\n  }\n  catch (error) {\n    loader.classList.add('visually-hidden');\n    iziToast.error({\n      icon: '',\n      position: 'topRight',\n      message: error.message\n    })\n  }\n}\n\nfunction showLoadMoreBtn(currentPage, perPage, total) {\n  const totalPages = Math.ceil(total / perPage);\n  if (currentPage > totalPages) {\n    return iziToast.error({\n      position: \"topRight\",\n      message: \"We're sorry, but you've reached the end of search results.\"\n    });\n  }\n  loadMoreBtn.classList.remove('visually-hidden');\n  scrollTwoCardsHigh()\n}\n\nfunction onLoadMoreBtnClick() {\n  loadMoreBtn.classList.add('visually-hidden');\n  loadAndRenderPictures()\n}\nfunction scrollTwoCardsHigh() {\n  const card = document.querySelector(\"ul.gallery .gallery-item\");\n  // Як на мене простіший варіант\n  // const cardHeight = card.offsetHeight\n  const cardHeight = card.getBoundingClientRect().height\n  setTimeout(() => {\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: \"smooth\",\n    });\n  }, 500);\n}"],"names":["API_KEY","axios","fetchPictures","searchData","page","perPage","imageType","orientation","safesearch","renderPictures","pictures","gallery","markup","picture","searchQuery","currentPage","searchForm","loadMoreBtn","loader","evt","iziToast","loadAndRenderPictures","onLoadMoreBtnClick","lightbox","SimpleLightbox","showLoadMoreBtn","error","total","totalPages","scrollTwoCardsHigh","cardHeight"],"mappings":"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"}